<!--- app\templates\relatorios\gastos_por_grupo.html -->

{% extends "base.html" %} {% block content %}
<div class="caixa-sombreada mb-2">
  <span class="text-dark fw-bold">Gastos por Grupos de Crediário:</span>
  <span class="text-danger"
    >Visão para identificar em que grupos e destinos estão indo os maiores
    gastos.</span
  >
</div>
<div class="card mb-2 shadow-sm border-secondary">
  <div class="card-header bg-light py-2">
    <h6 class="mb-0 text-secondary fw-semibold">
      <i class="fas fa-bullseye me-2"></i>Gastos por Destino ({{ ano }})
    </h6>
  </div>

  <div class="card-body p-2">
    <div class="row g-2 text-center">
      <div class="col">
        <div class="border rounded p-1">
          <div class="text-muted small fw-bold">Próprio</div>
          <div
            class="h5 mb-0 {% if dados_destino['Próprio'].valor >= 0 %}text-danger{% else %}text-success{% endif %}"
          >
            {{ dados_destino['Próprio'].valor | format_currency }}
          </div>
          <div class="text-muted extra-small">
            ({{ dados_destino['Próprio'].percentual }}%)
          </div>
        </div>
      </div>

      <div class="col">
        <div class="border rounded p-1">
          <div class="text-muted small fw-bold">Outros</div>
          <div
            class="h5 mb-0 {% if dados_destino['Outros'].valor >= 0 %}text-danger{% else %}text-success{% endif %}"
          >
            {{ dados_destino['Outros'].valor | format_currency }}
          </div>
          <div class="text-muted extra-small">
            ({{ dados_destino['Outros'].percentual }}%)
          </div>
        </div>
      </div>

      <div class="col">
        <div class="border rounded p-1">
          <div class="text-muted small fw-bold">Coletivo</div>
          <div
            class="h5 mb-0 {% if dados_destino['Coletivo'].valor >= 0 %}text-danger{% else %}text-success{% endif %}"
          >
            {{ dados_destino['Coletivo'].valor | format_currency }}
          </div>
          <div class="text-muted extra-small">
            ({{ dados_destino['Coletivo'].percentual }}%)
          </div>
        </div>
      </div>

      <div class="col">
        <div class="border border-primary rounded p-1 bg-primary-subtle">
          <div class="text-primary small fw-bold">TOTAL GERAL</div>
          <div
            class="h5 mb-0 fw-bold {% if dados_destino['Total Geral'].valor >= 0 %}text-danger{% else %}text-success{% endif %}"
          >
            {{ dados_destino['Total Geral'].valor | format_currency }}
          </div>
          <div class="text-muted extra-small">(100.0%)</div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="card shadow-sm mb-3">
  <div class="card-header menu-primario">
    <h5 class="mb-0">
      <i class="fas fa-chart-pie me-2"></i> Gastos por Grupo´de Crediário (Ano:
      {{ ano }})
    </h5>
  </div>
  <div class="card-body">
    {% if dados_grupo %}
    <p class="text-muted">
      Soma de todos movimentos de crediário (compras e estornos) no ano de {{
      ano }}, agrupados por grupo e ordenados do maior para o menor.
    </p>
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th class="text-center">Posição</th>
            <th>Grupo de Crediário</th>
            <th class="text-end">Valor Total (Líquido)</th>
          </tr>
        </thead>
        <tbody>
          {% for item in dados_grupo %}
          <tr>
            <td class="text-center">{{ loop.index }}</td>
            <td>{{ item.grupo }}</td>
            <td
              class="text-end fw-semibold {% if item.total >= 0 %}text-danger{% else %}text-success{% endif %}"
            >
              {{ item.total | format_currency }}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <p class="text-center alert alert-info">
      Nenhum dado de crediário encontrado para o ano de {{ ano }}.
    </p>
    {% endif %}
  </div>
</div>
{% endblock %}
