<!-- app\templates\dashboard_partials\card_ultimas_mov.html -->

<div class="card shadow-sm h-100">
  <div class="card-header bg-light py-2">
    <h6 class="fw-bold mb-0 text-secondary small text-uppercase">
      <i class="fas fa-history me-1"></i> Últimas Movimentações
    </h6>
  </div>
  <div class="card-body p-0" style="overflow-y: auto; max-height: 400px">
    {% if ultimos_movimentos %}
    <ul class="list-group list-group-flush">
      {% for mov in ultimos_movimentos %}
      <li
        class="list-group-item p-2 d-flex justify-content-between align-items-center"
      >
        <div class="overflow-hidden me-2">
          <div
            class="fw-semibold text-dark small text-truncate"
            title="{{ mov.descricao }}"
          >
            {{ mov.descricao or 'N/A' }}
          </div>
          <div class="text-muted extra-small">
            {{ mov.data_movimento.strftime('%d/%m') }} • {{ mov.conta.nome_banco
            }}
          </div>
        </div>
        <span
          class="badge rounded-pill {% if mov.tipo_transacao.tipo == 'Débito' %}bg-danger-subtle text-danger-emphasis{% else %}bg-success-subtle text-success-emphasis{% endif %}"
        >
          {{ mov.valor | format_number }}
        </span>
      </li>
      {% endfor %}
    </ul>
    {% else %}
    <p class="text-center text-muted small my-3">Sem movimentações recentes.</p>
    {% endif %}
  </div>
</div>
